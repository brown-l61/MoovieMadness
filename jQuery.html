<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API POST Request Example</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  </head>
  <body>
    <script>
      $(document).ready(function () {
          // These values should be populated from the front end login form
          var requestData = {
              userName: "glennga9",
              PasswordHash: "Liverpbhool18"
          };
      
          // Make a POST request
          $.ajax({
              url: 'https://prod-33.northeurope.logic.azure.com/workflows/03405edc249b4f49a9ea6f2fe051d1fe/triggers/manual/paths/invoke/rest/mp/login?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=q36lnlz3YsGid82M6XtVvvIBfX2lFSBo3K1tM6HvTwo',
              method: 'POST',
              contentType: 'application/json',
              data: JSON.stringify(requestData),
              success: function (response) {
      
      var isExistsValue = response.ResultSets.Table1[0].isExists;
      
                  // Example: Redirect based on 'isExists' value
                  if (isExistsValue === 1) {
                    document.write('This user exists and can be logged in.');
      
      //Here the user is authenticated, we should then call a second API 'Check User Role' to get their role from the database.  Based on the returned role, direct to the correct html page.
      
      //^^^
      
                  } else if (isExistsValue === 0) {
                    document.write('This user was not found and can not log in.'); 
                  } else {
                      console.log('Unexpected response:', response);
                  }
              },
              error: function (xhr, status, error) {
                  // Handle errors if necessary
                  console.error('Error:', status, error);
              }
          });
      });
    </script>
  </body>
</html>